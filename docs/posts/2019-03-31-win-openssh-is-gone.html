<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>krymtkts: Windows10ã®æ›´æ–°ã§OpenSSHãŒé€ã£ãŸ</title>
    <link rel="canonical" href="https://krymtkts.github.io/posts/2019-03-31-win-openssh-is-gone">
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <meta name="description" content="krymtkts&#39;s personal blog">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="krymtkts&#39;s personal blog" />
    <meta property="og:site_name" content="krymtkts" />
    <meta property="og:title" content="krymtkts: Windows10ã®æ›´æ–°ã§OpenSSHãŒé€ã£ãŸ" />
    <meta property="og:url" content="https://krymtkts.github.io/posts/2019-03-31-win-openssh-is-gone" />
    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/solarized-dark.min.css" integrity="sha256-90Y+fvi28WF+3jKH4tHEkoQ9WLeFKJjpvCPNOtU9ZvU=" crossorigin="anonymous" />
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">krymtkts</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/">Home</a></li>
                <li
                ><a href="/archives">Archives</a></li>
                
                <li
                >
                <a href="/pages/about">About Me</a>
                </li>
                
                <li><a href="/feed.xml">RSS</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                        More <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        

                        
                        <li class="dropdown-header">Recent Posts</li>
                        
                        <li><a href="/posts/2022-05-07-start-to-write-cmdlet-by-fsharp">F#ã§ PowerShell ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’æ›¸ãå§‹ã‚ãŸ</a></li>
                        
                        <li><a href="/posts/2022-04-29-good-bye-omp-module">ã•ã‚ˆãªã‚‰ oh-my-posh ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</a></li>
                        
                        <li><a href="/posts/2022-04-23-aws-rehabilitation">AWS ãƒªãƒãƒ“ãƒªã®ãƒãƒã‚Šé›†</a></li>
                        
                        

                        
                        <li class="divider"></li>
                        <li class="dropdown-header">Tags</li>
                        
                        <li><a href="/tags/biasamp">biasamp</a></li>
                        
                        <li><a href="/tags/poco">poco</a></li>
                        
                        <li><a href="/tags/tips">tips</a></li>
                        
                        <li><a href="/tags/evernote">evernote</a></li>
                        
                        <li><a href="/tags/qunit">qunit</a></li>
                        
                        <li><a href="/tags/cryogen">cryogen</a></li>
                        
                        <li><a href="/tags/nyc">nyc</a></li>
                        
                        <li><a href="/tags/diary">diary</a></li>
                        
                        <li><a href="/tags/github">github</a></li>
                        
                        <li><a href="/tags/clojure">clojure</a></li>
                        
                        <li><a href="/tags/vscode">vscode</a></li>
                        
                        <li><a href="/tags/stepfunctions">stepfunctions</a></li>
                        
                        <li><a href="/tags/aws">aws</a></li>
                        
                        <li><a href="/tags/shieldsio">shieldsio</a></li>
                        
                        <li><a href="/tags/retrospective">retrospective</a></li>
                        
                        <li><a href="/tags/boto3">boto3</a></li>
                        
                        <li><a href="/tags/job">job</a></li>
                        
                        <li><a href="/tags/oh-my-posh">oh-my-posh</a></li>
                        
                        <li><a href="/tags/elm">elm</a></li>
                        
                        <li><a href="/tags/elb">elb</a></li>
                        
                        <li><a href="/tags/openssh">openssh</a></li>
                        
                        <li><a href="/tags/powershell">powershell</a></li>
                        
                        <li><a href="/tags/gist">gist</a></li>
                        
                        <li><a href="/tags/planck">planck</a></li>
                        
                        <li><a href="/tags/acm">acm</a></li>
                        
                        <li><a href="/tags/php">php</a></li>
                        
                        <li><a href="/tags/go">go</a></li>
                        
                        <li><a href="/tags/mechanicalkeyboard">mechanicalkeyboard</a></li>
                        
                        <li><a href="/tags/pandoc">pandoc</a></li>
                        
                        <li><a href="/tags/fsharp">fsharp</a></li>
                        
                        <li><a href="/tags/windows">windows</a></li>
                        
                        <li><a href="/tags/maven">maven</a></li>
                        
                        <li><a href="/tags/font">font</a></li>
                        
                        <li><a href="/tags/git">git</a></li>
                        
                        <li><a href="/tags/docker">docker</a></li>
                        
                        <li><a href="/tags/todo">todo</a></li>
                        
                        <li><a href="/tags/sh">sh</a></li>
                        
                        <li><a href="/tags/cement">cement</a></li>
                        
                        <li><a href="/tags/psake">psake</a></li>
                        
                        <li><a href="/tags/textlin">textlin</a></li>
                        
                        <li><a href="/tags/python">python</a></li>
                        
                        <li><a href="/tags/golang">golang</a></li>
                        
                        <li><a href="/tags/fnm">fnm</a></li>
                        
                        <li><a href="/tags/lambda">lambda</a></li>
                        
                        <li><a href="/tags/tortoisegit">tortoisegit</a></li>
                        
                        <li><a href="/tags/docker-toolbox">docker-toolbox</a></li>
                        
                        <li><a href="/tags/serverless">serverless</a></li>
                        
                        <li><a href="/tags/qmkfirmware">qmkfirmware</a></li>
                        
                        <li><a href="/tags/nodejs">nodejs</a></li>
                        
                        <li><a href="/tags/goal">goal</a></li>
                        
                        <li><a href="/tags/powershellgallery">powershellgallery</a></li>
                        
                        <li><a href="/tags/puppeteer">puppeteer</a></li>
                        
                        
                    </ul>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">2019-03-31</div>
        
    </div>
    <h2>Windows10ã®æ›´æ–°ã§OpenSSHãŒé€ã£ãŸ</h2>
</div>
<div>
    
    <p>ä»Šæ›´ãªãŒã‚‰ã€Raser Blade Stealth 2018ã«ã‚‚Windows10 ver1809ã®æ›´æ–°ãŒæ¥ã¦ãŸã‚ˆã†ã ã£ãŸã€‚</p><p>ä½•ã®æ°—ãªã—ã«æ›´æ–°ã—ã¦ã¿ãŸã¨ã“ã‚ã€æ›´æ–°è‡ªä½“ã¯ã™ãã«çµ‚ã‚ã£ã¦ã‚ã£ã•ã‚Šã„ã£ãŸãªã¨æ€ã£ã¦ã„ãŸã®ã ãŒã€terminalã‚’ç«‹ã¡ä¸Šã’ã‚‹ã¨...</p><h3 id="tldr">TL;DR</h3><p>Windows10 ver1809ã®OpenSSHã¯æ—¢çŸ¥ã®ãƒã‚°ãŒã‚ã‚‹ã®ã§OpenSSH Portableã‚’å…¥ã‚Œç›´ãã†ã€‚</p><h3 id="ã¾ãšssh-agentã®ã‚µãƒ¼ãƒ“ã‚¹ãŒç„¡åŠ¹ã«ãªã£ã¦ãŸ">ã¾ãšSSH Agentã®ã‚µãƒ¼ãƒ“ã‚¹ãŒç„¡åŠ¹ã«ãªã£ã¦ãŸ</h3><pre><code class="powershell">Get-Process : Cannot find a process with the name "ssh-agent". Verify the process name and call the cmdlet again.
At C:\Users\takatoshi\OneDrive\Documents\PowerShell\Microsoft.PowerShell_profile.ps1:40 char:8
+ if (! (Get-Process -Name 'ssh-agent')) {
+        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : ObjectNotFound: (ssh-agent:String) [Get-Process], ProcessCommandException
+ FullyQualifiedErrorId : NoProcessFoundForGivenName,Microsoft.PowerShell.Commands.GetProcessCommand
</code></pre><p>PowerShellã®profileã§<code>ssh-agent</code>ã®ãƒ—ãƒ­ã‚»ã‚¹ã®å­˜åœ¨ã‚’ç¢ºèªã™ã‚‹ã‚ˆã†ã«ã—ã¦ãŸã®ã ã‘ã©ã€Windowsã®æ›´æ–°ã§ã‚µãƒ¼ãƒ“ã‚¹ã®è‡ªå‹•å®Ÿè¡ŒãŒç„¡åŠ¹ã«ãªã£ã¦ãŸã‚ˆã†ãªã®ã§ã“ã®ã‚¨ãƒ©ãƒ¼ãŒ...ã¨ã‚Šã‚ãˆãšä»Šå›ã¯æ‰‹å‹•ã§è‡ªå‹•å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«å¤‰ãˆã¦çµ‚ã‚ã£ãŸã€‚</p><p>ã‚ã¨ã©ã†ã„ã†ã‚ã‘ã‹ã‚ã‹ã‚‰ãªã„ãŒã€PCèµ·å‹•æ™‚ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ç«‹ã¡ä¸ŠãŒã‚ŠãŒã‚ã¡ã‚ƒãã¡ã‚ƒé…ããªã£ãŸæ°—ãŒã™ã‚‹(ä½“æ„Ÿ)ã€‚PCèµ·å‹•å¾Œã«ã™ãterminalã‚’ç«‹ã¡ä¸Šã’ã‚‹ã¨åŒã˜ã‚¨ãƒ©ãƒ¼ãŒã¾ã å‡ºã‚‹ã‹ã‚‰ã€‚æ ¹æ²»ã•ã›ã‚‹ã«ã¯profileã‚’ã„ã˜ã‚‰ãªã„ã¨ã„ã‘ãªã„ã‹ãªğŸ¤”</p><p>å¾Œè¿°ã®å•é¡Œã«æ¯”ã¹ã‚Œã°ã€ã“ã¡ã‚‰ã¯æ¥½ã—ã„ã‚¢ã‚¯ã‚·ãƒ‡ãƒ³ãƒˆç¨‹åº¦ã®ã‚‚ã®ã ã€‚</p><h3 id="win10å‚™ãˆä»˜ã‘ã®opensshã«æ—¢çŸ¥ã®ãƒã‚°ãŒæœ‰ã‚‹ã¨ã‹äº‘ã€…">Win10å‚™ãˆä»˜ã‘ã®OpenSSHã«æ—¢çŸ¥ã®ãƒã‚°ãŒæœ‰ã‚‹ã¨ã‹äº‘ã€…</h3><pre><code class="powershell">$ git remote show origin
warning: agent returned different signature type ssh-rsa (expected rsa-sha2-512)
...
</code></pre><p>â†‘ã“ã®è­¦å‘ŠãŒå¸¸æ™‚å‡ºã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚ã‚€ã‹ã¤ãğŸ’¢</p><p>ç›´ã•ãª...ğŸ˜­ã¨æ€ã£ã¦ã‚°ã‚°ã£ã¦ã¿ã‚‹ã¨...</p><p><a href="https://github.com/PowerShell/Win32-OpenSSH/issues/1263">ssh-agent: agent returned different signature type Â· Issue #1263 Â· PowerShell/Win32-OpenSSH</a></p><p>ã“ã‚Œã®æ§˜å­ğŸ¤”</p><p>æ›´ã«èª¿ã¹ã‚‹ã¨ã€ã“ã‚Œãƒã‚¸Issueã‚„ãªã¨æ€ã‚ã–ã‚‹ã‚’å¾—ãªã„... -&gt; <a href="https://github.com/PowerShell/openssh-portable/pull/366">Fixes to ssh-agent issues by manojampalam Â· Pull Request #366 Â· PowerShell/openssh-portable</a></p><p>ã¤ã¾ã‚Šã¯ãƒã‚°ãŒç›´ã£ãŸOpenSSH-Portbaleå…¥ã‚Œãªã„ã¨è§£æ±ºã—ãªã„ã£ã¦ã‚“ã§FAã‹ãª...ã‚­ãƒ¬ãã†â¤</p><p><a href="https://blog.frankfu.com.au/2019/03/21/moving-from-windows-1809s-openssh-to-openssh-portable/">Moving from Windows 1809's OpenSSH to OpenSSH Portable</a></p><p>å¹¸ã„ã«ã‚‚åŒã˜éšœå®³ã‚’è§£æ¶ˆã—ãŸãƒ–ãƒ­ã‚°ãŒã‚ã£ãŸã®ã§åŠ©ã‹ã‚‹ğŸ™</p><h4 id="å‡¦ç½®ã™ã‚‹">å‡¦ç½®ã™ã‚‹</h4><p><a href="https://blog.frankfu.com.au/2019/03/21/moving-from-windows-1809s-openssh-to-openssh-portable/">Moving from Windows 1809's OpenSSH to OpenSSH Portable</a></p><p>ã“ã®è¨˜äº‹ã«ãã®ã¾ã¾å¾“ãˆã°ã„ã‘ã‚‹ã€‚</p><p>Windowsã«é–¢ã‚ã‚‹æ“ä½œã¯PowerShell Coreã§ã¯ã§ããªã„ã®ã§ã€PowerShell Coreã¨WindowsPowerShellã‚’ä½¿ã„åˆ†ã‘ãŸ(WindowsPowerShellã§å…¨éƒ¨ã‚„ã‚Œã°ã„ã„ã‚‚ã®ã‚’...ğŸ˜…)</p><p>Coreã§ã§ãã‚‹ç¯„å›²ã‹ã‚‰å§‹ã‚ã‚‹ã€‚</p><pre><code class="powershell">$ Get-Service -Name ssh-agent | Stop-Service
$ sc.exe delete ssh-agent
[SC] DeleteService SUCCESS
</code></pre><p>WindowsPowerShellã§ã—ã‹ã§ããªã„ç¯„å›²</p><pre><code class="powershell">$ Remove-WindowsCapability -Online -Name "OpenSSH.Client~~~~0.0.1.0"


Path          :
Online        : True
RestartNeeded : False



$  Remove-WindowsCapability -Online -Name "OpenSSH.Server~~~~0.0.1.0"


Path          :
Online        : True
RestartNeeded : False
</code></pre><p>Coreã§ç¶šãã‚’ã‚„ã‚‹</p><pre><code class="powershell">$ choco install openssh --package-parameters="/SSHAgentFeature"
</code></pre><pre><code>Chocolatey v0.10.13
2 validations performed. 1 success(es), 1 warning(s), and 0 error(s).

Validation Warnings:
 - A pending system reboot request has been detected, however, this is
   being ignored due to the current Chocolatey configuration.  If you
   want to halt when this occurs, then either set the global feature
   using:
     choco feature enable -name=exitOnRebootDetected
   or pass the option --exit-when-reboot-detected.

Installing the following packages:
openssh
By installing you accept licenses for the packages.
Progress: Downloading openssh 7.9.0.1... 100%

openssh v7.9.0.1 [Approved]
openssh package files install completed. Performing other installation steps.
The package openssh wants to run 'chocolateyinstall.ps1'.
Note: If you don't run this script, the installation will fail.
Note: To confirm automatically next time, use '-y' or consider:
choco feature enable -n allowGlobalConfirmation
Do you want to run the script?([Y]es/[N]o/[P]rint): y

Running on: Windows 10 Home, (Core)
Windows Version: 10.0.17763

************************************************************************************
************************************************************************************
This package is a Universal Installer and can ALSO install Win32-OpenSSH on
Nano, Server Core, Docker Containers and more WITHOUT using Chocolatey.

See the following for more details:
https://github.com/DarwinJS/ChocoPackages/blob/master/openssh/readme.md
************************************************************************************
************************************************************************************

/SSHAgentFeature was used, including SSH Agent Service.
Extracting C:\ProgramData\chocolatey\lib\openssh\tools\OpenSSH-Win64.zip to C:\Users\takatoshi\AppData\Local\Temp\chocolatey\OpenSSHTemp...
C:\Users\takatoshi\AppData\Local\Temp\chocolatey\OpenSSHTemp
Source files are internal to the package, checksums are not required nor checked.
C:\Program Files\OpenSSH-Win64
C:\Program Files\OpenSSH-Win64\FixHostFilePermissions.ps1
C:\Program Files\OpenSSH-Win64\FixUserFilePermissions.ps1
C:\Program Files\OpenSSH-Win64\install-sshd.ps1
C:\Program Files\OpenSSH-Win64\libcrypto.dll
C:\Program Files\OpenSSH-Win64\openssh-events.man
C:\Program Files\OpenSSH-Win64\OpenSSHUtils.psd1
C:\Program Files\OpenSSH-Win64\OpenSSHUtils.psm1
C:\Program Files\OpenSSH-Win64\scp.exe
C:\Program Files\OpenSSH-Win64\sftp-server.exe
C:\Program Files\OpenSSH-Win64\sftp.exe
C:\Program Files\OpenSSH-Win64\ssh-add.exe
C:\Program Files\OpenSSH-Win64\ssh-agent.exe
C:\Program Files\OpenSSH-Win64\ssh-keygen.exe
C:\Program Files\OpenSSH-Win64\ssh-keyscan.exe
C:\Program Files\OpenSSH-Win64\ssh-shellhost.exe
C:\Program Files\OpenSSH-Win64\ssh.exe
C:\Program Files\OpenSSH-Win64\sshd.exe
C:\Program Files\OpenSSH-Win64\sshd_config_default
C:\Program Files\OpenSSH-Win64\uninstall-sshd.ps1
C:\Program Files\OpenSSH-Win64\Set-SSHDefaultShell.ps1
PATH environment variable does not have C:\Program Files\OpenSSH-Win64 in it. Adding...
Updating machine environment variable TERM from "" to ""
[SC] SetServiceObjectSecurity SUCCESS
Starting SSH-Agent...

NEW VERSIONS OF SSH EXES:

FileName                                         FileVersion
--------                                         -----------
C:\Program Files\OpenSSH-Win64\scp.exe           7.9.0.0
C:\Program Files\OpenSSH-Win64\sftp-server.exe   7.9.0.0
C:\Program Files\OpenSSH-Win64\sftp.exe          7.9.0.0
C:\Program Files\OpenSSH-Win64\ssh-add.exe       7.9.0.0
C:\Program Files\OpenSSH-Win64\ssh-agent.exe     7.9.0.0
C:\Program Files\OpenSSH-Win64\ssh-keygen.exe    7.9.0.0
C:\Program Files\OpenSSH-Win64\ssh-keyscan.exe   7.9.0.0
C:\Program Files\OpenSSH-Win64\ssh-shellhost.exe 7.9.0.0
C:\Program Files\OpenSSH-Win64\ssh.exe           7.9.0.0
C:\Program Files\OpenSSH-Win64\sshd.exe          7.9.0.0




WARNING: You must start a new prompt, or use the command 'refreshenv' (provided by your chocolatey install) to re-read the environment for the tools to be available in this shell session.
Environment Vars (like PATH) have changed. Close/reopen your shell to
 see the changes (or in powershell/cmd.exe just type `refreshenv`).
 The install of openssh was successful.
  Software installed to 'C:\Users\takatoshi\AppData\Local\Temp\chocolatey\OpenSSHTemp'

Chocolatey installed 1/1 packages.
 See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).
</code></pre><pre><code class="powershell">$ Get-Service ssh-agent

Status   Name               DisplayName
------   ----               -----------
Running  ssh-agent          ssh-agent
</code></pre><pre><code class="powershell">$ git config --global core.sshCommand "'C:\Program Files\OpenSSH-Win64\ssh.exe'"
</code></pre><p>ç’°å¢ƒå¤‰æ•°PATHã‚’åæ˜ ã•ã›ã¦ã‹ã‚‰ã€terminalã§wariningãŒæ¶ˆãˆãŸã®ã‚’ç¢ºèª</p><h3 id="æŒ¯ã‚Šè¿”ã‚Š">æŒ¯ã‚Šè¿”ã‚Š</h3><p>Windowsã®ã§ã‹ã„æ›´æ–°ã®éš›ã¯ã¡ã‚ƒã‚“ã¨æ³¨æ„ã—ã¦å–ã‚Šçµ„ã¾ãªã‚ã‹ã‚“ãªğŸ¤”(ã‚ã‚“ã©ã„)</p><p>ã‚ã¨ã“ã‚Œã¾ãŸæ—¢çŸ¥ã®åˆ¥ä»¶ãªã®ã ã‘ã©ã€ver1809ã ã¨terminalã®emojiã®è¡¨ç¤ºãŒä¸­ç‚¹ã¨ã‹ã«åŒ–ã‘ã‚‹ã®ã§ã€ã“ã‚Œã‚‚ãªã‚“ã¨ã‹ã—ãŸã„ã‚...</p><p>Cmder/ConEmuã˜ã‚ƒãªãã¦Windowsè‡ªä½“ã®å•é¡Œã¿ãŸã„ã€‚</p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/tags/openssh">openssh</a>
    
    <a href="/tags/windows">windows</a>
    
</div>


    <div id="prev-next">
        
        <a href="/posts/2019-04-02-pubslish-first-module-to-powershell-gallery">&laquo; 2019-04-02 ã¯ã˜ã‚ã¦ã®PowerShell Galleryã¸ã®å…¬é–‹</a>
        
        
        <a class="right" href="/posts/2019-03-24_coverage-of-qunt-puppeteer">2019-03-24 QUnit ã§ CI ã—ãŸã„ ãã® 2 &raquo;</a>
        
    </div>

    


</div>

            </div>
        </div>
    </div>
    <footer>Copyright &copy; 2019-2022 krymtkts
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js" type="application/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
